# Universal dataset template for can-train-and-test-v1.5 structure
# Works for: hcrl-sa, hcrl-ch, set_01, set_02, set_03, set_04

name: "${oc.env:DATASET_NAME,set_01}"  # Override with env var or command line
type: "graph_dataset"
description: "CAN attack detection dataset - auto-discovers train_ folders"

# Base path - all datasets are under this structure
base_path: "datasets/can-train-and-test-v1.5"
data_path: "${dataset.base_path}/${dataset.name}"
cache_dir: "datasets/cache/${dataset.name}"

# Your preprocessing automatically finds train_* folders, so minimal config needed
preprocessing:
  # Your graph_creation function handles these automatically
  auto_discover_train_folders: true    # This is what your code does
  feature_dim: 11                      # Verified from your preprocessing
  
  # Cache settings for performance
  cache_processed_data: true
  
# Standard dataset splits (your train_models.py uses 80/20)  
splits:
  train: 0.8
  val: 0.2
  test: 0.0

# Lightning optimization
batch_size_limits:
  min: 256
  max: 16384
  default: 1024

# Your current dataloader settings from train_models.py
dataloader:
  num_workers: auto         # Your code: min(os.cpu_count() or 1, 8)
  pin_memory: true          # Your code: torch.cuda.is_available()
  persistent_workers: true  # Your code already does this